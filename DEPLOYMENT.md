# üöÄ Enerlectra Deployment Guide

This guide will walk you through deploying Enerlectra - The Energy Internet to production environments.

## üåê Deployment Overview

Enerlectra uses a modern deployment architecture:
- **Frontend**: Vercel (React SPA with PWA capabilities)
- **Backend**: Railway/Heroku (Node.js API with WebSocket support)
- **Database**: Railway PostgreSQL (production) / JSON files (development)
- **CDN**: Vercel Edge Network for global performance

## üì± Frontend Deployment (Vercel)

### Prerequisites
- Vercel account (free tier available)
- GitHub repository connected to Vercel
- Node.js 18+ installed locally

### Step 1: Install Vercel CLI
```bash
npm install -g vercel
```

### Step 2: Login to Vercel
```bash
vercel login
```

### Step 3: Deploy from Client Directory
```bash
cd client
vercel --prod
```

### Step 4: Configure Environment Variables
In Vercel dashboard, set these environment variables:
```env
VITE_API_URL=https://your-backend-url.railway.app
VITE_WS_URL=wss://your-backend-url.railway.app
NEXT_PUBLIC_APP_NAME=Enerlectra
NEXT_PUBLIC_APP_DESCRIPTION=The Energy Internet
```

### Step 5: Custom Domain (Optional)
1. Go to Vercel dashboard ‚Üí Domains
2. Add your custom domain (e.g., `enerlectra.com`)
3. Configure DNS records as instructed

## üîß Backend Deployment (Railway)

### Prerequisites
- Railway account (free tier available)
- GitHub repository connected to Railway
- Node.js 18+ project structure

### Step 1: Connect Repository
1. Go to [Railway.app](https://railway.app)
2. Click "New Project"
3. Select "Deploy from GitHub repo"
4. Choose your Enerlectra repository

### Step 2: Configure Build Settings
Railway will auto-detect Node.js, but verify these settings:
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Node Version**: 18.x

### Step 3: Set Environment Variables
```env
NODE_ENV=production
PORT=5000
JWT_SECRET=your-super-secure-jwt-secret
CORS_ORIGINS=https://enerlectra.vercel.app,https://your-domain.com
DATABASE_URL=your-postgresql-connection-string
REDIS_URL=your-redis-connection-string
```

### Step 4: Deploy
Railway will automatically deploy on every push to main branch.

## üóÑÔ∏è Database Setup (Production)

### PostgreSQL on Railway
1. Add PostgreSQL service to your Railway project
2. Copy the connection string to your environment variables
3. Update your backend to use PostgreSQL instead of JSON files

### Redis for Caching (Optional)
1. Add Redis service to Railway project
2. Use for session storage and caching

## üîê Security Configuration

### SSL/TLS
- **Vercel**: Automatic HTTPS with Let's Encrypt
- **Railway**: Automatic HTTPS with custom certificates

### Environment Variables Security
- Never commit secrets to Git
- Use Railway's encrypted environment variables
- Rotate JWT secrets regularly

### CORS Configuration
```typescript
// Backend CORS settings
const corsOptions = {
  origin: [
    'https://enerlectra.vercel.app',
    'https://your-domain.com'
  ],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS']
};
```

## üìä Monitoring & Analytics

### Vercel Analytics
- Built-in performance monitoring
- Real user metrics
- Core Web Vitals tracking

### Railway Monitoring
- Application logs
- Performance metrics
- Error tracking

### Custom Health Checks
```bash
# Test backend health
curl https://your-backend.railway.app/health

# Test frontend
curl https://enerlectra.vercel.app
```

## üöÄ Performance Optimization

### Frontend
- Vercel Edge Network for global CDN
- Automatic image optimization
- Code splitting and lazy loading
- PWA caching strategies

### Backend
- Connection pooling for database
- Redis caching layer
- Rate limiting and DDoS protection
- WebSocket connection optimization

## üîÑ CI/CD Pipeline

### GitHub Actions
```yaml
name: Deploy Enerlectra
on:
  push:
    branches: [main]

jobs:
  deploy-frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
          working-directory: ./client

  deploy-backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Railway
        uses: bervProject/railway-deploy@v1.0.0
        with:
          railway_token: ${{ secrets.RAILWAY_TOKEN }}
          service: ${{ secrets.RAILWAY_SERVICE }}
```

## üß™ Testing Before Deployment

### Local Testing
```bash
# Frontend
cd client
npm run build
npm run preview

# Backend
npm run build
npm start
```

### Staging Environment
1. Deploy to staging branch first
2. Run comprehensive tests
3. Verify all features work
4. Check performance metrics

## üì± PWA Deployment

### Service Worker
- Automatically generated by Vercel
- Caches static assets
- Enables offline functionality

### Manifest File
- Already configured in `client/public/manifest.json`
- PWA installation prompts
- App-like experience

## üåç Global Distribution

### Vercel Edge Network
- Automatic global CDN
- Edge functions for dynamic content
- Geographic routing for optimal performance

### Railway Regions
- Choose deployment region close to your users
- Automatic failover and redundancy

## üîç Troubleshooting

### Common Issues

#### Frontend Not Loading
```bash
# Check Vercel deployment status
vercel ls

# Check build logs
vercel logs
```

#### Backend Connection Errors
```bash
# Check Railway logs
railway logs

# Verify environment variables
railway variables
```

#### Database Connection Issues
```bash
# Test database connection
railway run npm run db:test

# Check connection string format
echo $DATABASE_URL
```

### Performance Issues
1. Check Vercel Analytics for frontend
2. Monitor Railway metrics for backend
3. Use browser DevTools for network analysis
4. Implement proper caching strategies

## üìà Scaling Considerations

### Frontend Scaling
- Vercel automatically scales
- Edge functions for dynamic content
- CDN optimization

### Backend Scaling
- Railway auto-scaling based on demand
- Database connection pooling
- Redis for session management

## üîí Production Security Checklist

- [ ] Environment variables secured
- [ ] CORS properly configured
- [ ] Rate limiting enabled
- [ ] SSL/TLS certificates valid
- [ ] Security headers configured
- [ ] Database access restricted
- [ ] Monitoring and alerting set up
- [ ] Backup strategy implemented
- [ ] Disaster recovery plan ready

## üìû Support & Maintenance

### Monitoring
- Set up uptime monitoring
- Configure error alerting
- Monitor performance metrics

### Updates
- Regular dependency updates
- Security patches
- Feature deployments

### Backup
- Database backups
- Configuration backups
- Code repository backups

---

## üéâ Deployment Complete!

Your Enerlectra application is now live with:
- ‚úÖ Professional branding and "The Energy Internet" tagline
- ‚úÖ Enterprise-grade security
- ‚úÖ Global CDN distribution
- ‚úÖ PWA capabilities
- ‚úÖ Real-time WebSocket connections
- ‚úÖ Comprehensive monitoring

**Live URLs:**
- Frontend: `https://enerlectra.vercel.app`
- Backend: `https://your-backend.railway.app`
- Health Check: `https://your-backend.railway.app/health`

**Next Steps:**
1. Test all functionality
2. Monitor performance
3. Set up alerts
4. Plan scaling strategy
5. Document procedures

---

*‚ö° Powered by The Energy Internet ‚ö°*